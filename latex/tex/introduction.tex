% Johdanto
\section{Introduction}

%(wikipedia: In recent decades, there is an important demand for 3D content for computer graphics, virtual reality and communication, triggering a change in emphasis for the requirements. Many existing systems for constructing 3D models are built around specialized hardware (e.g. stereo rigs) resulting in a high cost, which cannot satisfy the requirement of its new applications. This gap stimulates the use of digital imaging facilities (like a camera). Moore's law also tells us that more work can be done in software. An early method was proposed by Tomasi and Kanade.[1] They used an affine factorization approach to extract 3D from images sequences. However, the assumption of orthographic projection is a significant limitation of this system.)

% Performance-Driven Facial Animation, Lance Williams, Computer Graphics, Volume 24, Number 4, August 1990
%%http://en.wikipedia.org/wiki/Facial_motion_capture

%% Leave first page empty
% (wat?)
\thispagestyle{empty}

\subsection{Background and motivation}

% content needed; introduce computer graphics
Computer graphics studies, among other topics, digital synthesis of visual content.
As the processing power of graphics hardware increases, content of increasing detail and quality is attaining interest.
Constructing realistic content synthetically or by hand is difficult and time-consuming, though.
Scanning subjects in real life for automatically building matching 3D content is becoming increasingly popular.

% connection to computer vision

The structure of three-dimensional (3D) content is universally described as surfaces consisting of polygons, mapped with pictures to add high-detailed color.
While computer graphics synthetises images by drawing millions of polygons to attain a realistic 3D image, computer vision is a field that tries to attain the inverse:
to study and understand images computationally for understanding the visual information.
Among all applications of computer vision, reconstructing a 3D view from planar images is an important one.

% introduce computer vision more and bring mvs in
Computer vision is a large and mature field; the area for acquiring detailed three-dimensional structure from pictures is well known, and there are several methods available.
On the other hand, the increasing processing power enables the methods to evolve and to even move to mobile devices.

Multi-view stereo is a method for extracting the geometry and color information of a subject from several images taken from different views.
It can be applied to a loose collection of pictures or to the result of a more strict set of calibrated cameras.
A stereo scanning rig is a specially constructed machinery, consisting of two or more cameras and software, for taking photos from different viewpoints for machine vision processing.

Plain stereo vision based on fixed two-camera views has been in use in many applications varying from robot industry to 3D movie recording.
Stereo vision compares the views of two cameras using similar information as in the binocular vision of humans and animals.
Multi-view stereo incorporates a multitude of cameras to acquire a more wide field of view at the same time.
The process of acquiring multi-view stereo images and processing them for 3D data is called 3D scanning or 3D reconstruction.

%3D reconstruction has long been used 
%The popularity of handheld computers - smartphones - equipped with relatively good quality cameras is currently an attractive target for 3d scanning software, while the actual reconstruction works in the cloud.
%Kinect, the active infrared-based scanner for the xbox console, has reached a phase where it can be considered ubiquitous in gaming.
%Movie and video game studios have used the technology already for years.
%%Current advances in camera technology and price make it possible for individual consumers to do pretty sophisticated reconstruction that has been possible only with a large budget of e.g. a movie studio.
%Even software that uses only a smart phone camera and runs on the same phone has been published.

% static/dynamic definition, surface vs. motion capture, texture

The need of dynamic content divides 3D scanning in two parts.
Only static cases, i.e. non-moving rigid bodies, present a simpler problem than dynamic subjects that move or deform over time, such as human bodies, skin, and clothing.
%and non-moving subject, while dynamic scanners are used for moving bodies or deforming surfaces such as human skin or clothing.

Static capture is simpler, as the time when the pictures are taken does not affect the outcome; even a single moving camera can be used.
Dynamic motion capture has long been used for capturing a human body performance with a large set of static cameras, encoding the positions of separate limbs.
Capturing the movement in much higher resolution to also scan the whole surface movement and deformation is more recent interest requiring much more computational power.

%also the moving texture (surface capture, as opposed to motion capture) while recording the geometry movement is a related, much more demanding task that has become more popular with the increase in computing power.

% applications

%(Other applications (uses). Movies. Remedy. Medical [essential physics of, bushberg]!).
%Landscape/architecture engineering. Crime scenes (police investigation). Topographic / terrain mapping. Geology, archaeology. Object replication with 3d printing. Aerial photography (digital elevation models DEM)

Static applications are more developed;
while dynamic scanning has lots of interest in scanning faces and human motion for entertainment, static cases have received attention in medical applications, architecture engineering and mapping, and crime scene investigation.

Large scale static 3D scanning and coloring of archeologic sceneries can be done with combining laser scanning and photographs \cite{lerma2010terrestrial}.

Small static objects have been scanned successfully with a turntable \cite{fitzgibbon1998automatic}, and structure from motion techniques have recently been presented that impressively recover a structure from pictures taken all over an outdoor location with no a priori information about the camera configurations. \cite{goesele2007multi,furukawa2010towards}.

% on motion capture

Human motion capture is one application of a specific dynamic 3D reconstruction.
Traditional ways to do motion capture use a set of reflective markers attached on a special suit to recover the motion of body parts over time, often encoded as parameters of skeletal joint angles.
The motion information is then reinterpreted for a 3D model to move its parts digitally.
Surface capture refers to the more detailed way to recover the motion of a complete surface, such as a human face or a cloth, to be augmented on a motion capture data.
Advances in camera resolution make it possible to use only surface texture fiducials without separate markers.

Reconstructing skin and cloth motion is another highly nonrigid application that can be scanned for acquisition of model parameters. \cite{pritchard2003cloth}

% http://www.siggraph.org/education/materials/HyperGraph/animation/character_animation/motion_capture/history1.htm

% starting our interests; humans in movies+games

%The Matrix \cite{wachowski99matrix}, a movie famous of its bullet-time scenes, used heavy optical flow processing to ``slow time down'';
%then, The Matrix Reloaded \cite{wachowski03reloaded} used a technique called Universal Capture by Borshukov et al. \cite{borshukov05universal} to capture the skin surface of a human head, in order to replicate the head in the form of computer models.

Recent movies and video games (such as \cite{rockstar2011noire}) have shown that by capturing real motion of facial expressions instead of simulating them produces significant results.
Literature on capture of human faces and skin surface motions is large. \cite{deng2007computer}
Professional quality capture still needs a laboratory environment with a large number of cameras \cite{winder2008technical,motionscan}.

%The movie industry usually knows the structure of the objects that are tracked; a pre-recorded mesh is used as a helping model (also called ``virtual bones'' to track the object pose. \cite{todo} % universal capture
%It is obviously easier to map image features to a priori information than to recover a fully unknown structure.
%(A pre-recorded higher resolution texture could be used for pore-level details, then tracking with a good-enough resolution and possibly markers to get wrinkles.)

% Realtime capture can be sped up by modeling the face in a parametric space, and mapping video frames to the model.

%The reconstruction and rendering involves lots of filtering of the raw data and further using high-resolution textures to extract better resolution depth data than what is available with computer vision technologies only.

% XXX less background, more contents and motivation

%Motivation: such uses, very popular, much algorithms, need own scanner wow.

\subsection{Goal and scope of the thesis}

% should the face stuff be moved under here? probably parts of it?

%The objective of this work is to describe a complete 3D object scanning and reconstruction pipeline for both shape and texture information.
This thesis is divided in two parts.
First, the relevant theoretical background on image acquisition and multi-view stereo reconstruction is presented.
After that, a more practical part follows: the ultimate aim of this thesis is to build an image acquisition system that can be a part of an end-to-end pipeline for scanned 3D content generation.

To construct a 3D scanning rig, the theory behind it is important to consider for justified design choices.
The hardware for such rig consists of properly placed cameras, light sources, and a computer.
Putting together all the parts for a general-purpose system needs studying of the end product as a whole.

The research problem of ``scanning an object in 3D'' is formulated in such a way that a proper hardware can be selected, and the quality of the built system can be addressed.
How an image is formed with a digital camera, what cameras are available in the market, and how a good input for a reconstruction algorithm can be achieved?
Clearly, performance of the reconstruction algorithms depend on the quality of their input.
Reconstruction implementations base their work on the same principles on calibration and triangulation.
To further assess and understand the resulting quality of the reconstruction, the fundamentals of the reconstruction algorithms are presented.

In this work, a digital camera based 3D scanning and reconstruction rig is constructed, supported by software tools for acquiring both static image data and video files.
By automating the camera configuration and image acquisition, the output of the scanner can be fed directly to a reconstruction software.
Final result produced by this work is a set of images and/or video, ready to be processed by a reconstruction software for producing a 3D mesh with detailed colors, possibly animated over time.

Constructing a rig means studying the theoretical background for the reconstruction process in order to be familiar with the system needs, selecting hardware and setting it up, and writing software for using the selected cameras to automate the scanning process.
Feasible readily available programs for reconstructing 3D geometry and texture based on the captured image data are surveyed and presented, for producing textured 3D meshes and/or point clouds for further handling.

%The subject is approached from the ground up without assuming too much computer vision knowledge from the reader.
%Some background in computer graphics is expected, but not required.
%%It is assumed that the reader is familiar with some basic concepts of light, such as wavelength and colors. Technical details of cameras and imaging are described and how images are represented digitally.

Aim of the rig is in hardware robustness, ease of use and general extendability.
Because there are no detailed plans on all further use of the machinery, it should support many kinds of studies in the future without requiring the user to know all implementation issues in detail, or at least have the process documented in the form of this thesis.

A special case study in this work is scanning the human face: an interesting target because of its complex surface material and diverse ability to produce many different expressions.

%In addition to multiple cameras at different locations and poses, an uniform lightning is also required to minimize specular difficulties in the texture.
%The aim of this work is to evaluate both software and hardware aspects in three-dimensional markerless object reconstruction, and to develop such system, targeted to small sized objects.
%Questions on what such a system needs to be usable and what accuracy can be theoretically achieved given a specific hardware are addressed.
%Many studies have recently focused on facial 3D reconstruction based on a set of high resolution photographs.
%

Basic techniques for taking also motion into account are presented, but the use of state-of-the-art algorithms is left for future implementations.

The thesis is organised in eight sections, of which this introduction is the first.
Section 2 presents the theoretical background on the elementary methods of image acquisition with a digital camera and the issues in video recording.
Relevant 3D reconstruction theory is described in section 3, with focus on the basics that recent state-of-the-art builds on.
Section 4 extends the 3D topic by introducing issues on dynamic subjects and motion capture.
In section 5, the implementation of the 3D scanning rig is described.
Sections 6 and 7 show test experiments on the rig and their results.
Section 8 concludes the work.
